# 排程頁面功能指南

## 概述
排程頁面是系統的核心排程管理介面，提供機台×班別矩陣視圖，讓用戶直觀地查看和管理工單分配。

## 主要功能

### 1. 機台×班別矩陣
- **橫向**：三個班別（早班 08:00-16:00、午班 16:00-24:00、夜班 24:00-08:00）
- **縱向**：四個機台（機台 1-4）
- **交叉點**：顯示該機台班別內的工單卡片

### 2. 工單卡片
每個卡片展示：
- **訂單號**：如 ORD-2024-001（上方左側）
- **狀態徽章**：運行中/待機/已完成（上方右側，彩色標籤）
- **產品代碼**：如 P-500A
- **時間區間**：估計開始-結束時間
- **進度條**：青紫漸層進度條，支援超過 100%
- **進度百分比**：視覺化顯示進度

### 3. 狀態篩選（左側欄）
可按狀態篩選工單：
- ⚫ 全部：顯示所有工單
- 🟢 運行中：進行中的工單
- 🟡 待機：未開始的工單
- 🔵 已完成：已完成的工單

### 4. 工具列功能
- **日期選擇器**：切換查看不同日期的排程
- **視角切換**（待實裝）：
  - 機台視角（當前）：按機台×班別組織
  - 訂單視角：按訂單組織
- **重新排程 (AI) 按鈕**（待實裝）：
  - 自動根據交期、優先級重新排序工單
  - 模擬 AI 排程邏輯

### 5. 拖曳排程（待實裝）
- 工單卡片可拖曳到其他機台×班別組合
- 自動保存新的分配
- 視覺反饋：卡片在拖曳時改變游標樣式

### 6. 圖例說明
- 🟢 運行中（綠色 #22c55e）
- 🟡 待機（黃色 #eab308）
- 🔵 已完成（青色 #1ea0e9）

## 設計特點

### 玻璃態態效應
- 半透明卡片背景（rgba 8%）
- 背景模糊效果（backdrop-filter: blur(20px)）
- 細膩邊框和內陰影

### 顏色系統
- **主色調**：深海藍 #0b1220
- **強調色**：青色 #1ea0e9、紫色 #7c3aed
- **狀態色**：綠#22c55e、黃#eab308、紅#ef4444

### 動畫效果
- 卡片懸停浮起效果（translateY -2px）
- 進度條發光動畫（多層 box-shadow）
- 按鈕點擊反饋

## 技術架構

### 組件結構
```
SchedulingPage
├── Toolbar (日期、視角、AI按鈕)
├── Sidebar (篩選 + 圖例)
└── Board
    ├── Header (班別標籤)
    └── Body (機台行)
        └── Shift Cells (工單卡片)
```

### 數據模型
```typescript
type WorkOrder = {
  id: string              // 工單唯一ID
  orderId: string        // 訂單號
  productId: string      // 產品代碼
  machineId: number      // 機台編號
  shift: 'morning' | 'afternoon' | 'night'
  estimatedStart: string // 預估開始時間
  estimatedEnd: string   // 預估結束時間
  progress: number       // 進度百分比 (0-100+)
  status: 'pending' | 'running' | 'completed'
}
```

## 未來改進

1. **API 整合**：連接真實排程引擎
2. **拖曳實裝**：完成工單跨機台/班別移動
3. **AI 排程**：實現智能排序算法
4. **視角切換**：訂單視角的渲染邏輯
5. **詳情頁**：點擊卡片查看完整工單信息
6. **匯出功能**：排程表導出為報告
7. **即時更新**：WebSocket 連線同步生產進度

## 使用流程

1. **查看排程**：進入「生產排程」頁面，查看當日機台×班別排程
2. **篩選工單**：使用左側篩選器查看特定狀態的工單
3. **手動調整**（待實裝）：拖曳工單到其他機台/班別重新排序
4. **AI 優化**（待實裝）：點擊「重新排程 (AI)」按鈕自動優化
5. **日期切換**：使用日期選擇器查看其他日期的排程

## 樣式參考

所有排程頁面樣式定義在 `src/styles.css` 中的 `/* Scheduling Page */` 區域。

相關 CSS 類：
- `.scheduling-page` - 頁面容器
- `.scheduling-toolbar` - 工具列
- `.scheduling-content` - 內容區域（側邊欄+排程板）
- `.scheduling-board` - 主排程矩陣
- `.shift-cell` - 班別格子
- `.work-order-card` - 工單卡片

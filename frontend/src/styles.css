:root{
  --bg: #0b1220; /* deep navy */
  --surface: #0f1724; /* card background */
  --muted: #9aa4b2;
  --accent: #1ea0e9; /* bright cyan for cards */
  --accent-2: #7c3aed; /* purple button */
  --cta: #24a148; /* green for sidebar buttons */
  --sidebar-bg: #071023;
  --text: #e6eef8;
}
body{font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background:linear-gradient(135deg,#050a12 0%,#0b1220 50%,#0a1530 100%); color:var(--text); margin:0; overflow-x:hidden}
.app-header{background:transparent;color:var(--text);padding:12px 20px;display:flex;align-items:center;justify-content:space-between}
.app-header h1{margin:0;font-size:18px}
nav button{margin-left:8px;padding:6px 10px;border-radius:6px;border:0;background:rgba(255,255,255,0.04);color:var(--text)}
nav button.active{background:rgba(255,255,255,0.06);color:var(--text)}
.container{padding:20px}
.page{background:var(--surface);border-radius:10px;padding:20px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
.page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.order-form{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:16px}
.order-form label{display:flex;flex-direction:column;font-size:13px;color:var(--text)}
.order-form input,.order-form select{padding:8px;border:1px solid #172033;border-radius:8px;background:transparent;color:var(--text)}
.order-form input[type="date"],.order-form input[type="time"]{padding:8px 12px;background:rgba(15,23,36,0.8);border:1px solid rgba(30,160,233,0.3);border-radius:8px;color:#ffffff;font-size:12px;cursor:pointer;color-scheme:light}
.order-form input[type="date"]:hover,.order-form input[type="time"]:hover{border-color:rgba(30,160,233,0.5)}
.order-form input[type="date"]::-webkit-calendar-picker-indicator,.order-form input[type="time"]::-webkit-calendar-picker-indicator{filter:invert(0.9) brightness(2);cursor:pointer;opacity:1}
.order-form input[type="date"]::-webkit-calendar-picker-indicator:hover,.order-form input[type="time"]::-webkit-calendar-picker-indicator:hover{filter:invert(0.9) brightness(2.5)}

/* New order form layout */
.order-form-new{display:flex;flex-direction:column;gap:24px;padding:24px;background:linear-gradient(135deg,rgba(26,58,94,0.3),rgba(15,40,71,0.5));border:1px solid rgba(255,255,255,0.1);border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.2);min-width:0;max-height:calc(100vh - 140px);overflow:hidden}

.order-form-header{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;flex-shrink:0;min-width:0}

.form-field{display:flex;flex-direction:column;gap:8px}

.form-field label{font-size:13px;font-weight:600;color:rgba(230,238,248,0.8);letter-spacing:0.3px}

.form-field input{padding:12px 14px;background:rgba(15,23,36,0.8);border:1px solid rgba(30,160,233,0.2);border-radius:8px;color:#ffffff;font-size:14px;transition:all 0.2s ease;width:100%;min-width:0;box-sizing:border-box;height:46px;line-height:normal}

.form-field input:focus{outline:none;border-color:rgba(30,160,233,0.5);box-shadow:0 0 0 3px rgba(30,160,233,0.1)}

.form-field input::placeholder{color:rgba(230,238,248,0.3)}

.form-field input[type="date"]{color-scheme:dark}

.products-section{display:flex;flex-direction:column;gap:12px;min-height:0;overflow-y:auto;padding-right:12px;flex:1;scrollbar-width:thin;scrollbar-color:rgba(30,160,233,0.4) transparent}

.products-section::-webkit-scrollbar{width:6px}

.products-section::-webkit-scrollbar-track{background:transparent}

.products-section::-webkit-scrollbar-thumb{background:rgba(30,160,233,0.4);border-radius:3px}

.products-section::-webkit-scrollbar-thumb:hover{background:rgba(30,160,233,0.6)}

.products-section h3{font-size:14px;font-weight:600;color:rgba(230,238,248,0.9);letter-spacing:0.3px;margin:0;padding:10px 16px;border-bottom:2px solid rgba(30,160,233,0.3);position:sticky;top:0;background:linear-gradient(135deg,rgba(26,58,94,0.98),rgba(15,40,71,0.98));z-index:1;backdrop-filter:blur(8px);margin-left:-2px;margin-right:-12px;border-radius:8px 8px 0 0;box-shadow:0 2px 8px rgba(0,0,0,0.2)}

.product-item-row{display:flex;align-items:flex-end;gap:16px;padding:18px;background:linear-gradient(135deg,rgba(30,160,233,0.05),rgba(124,58,237,0.03));border:1px solid rgba(30,160,233,0.15);border-radius:10px;transition:all 0.2s ease;min-width:0}

.product-item-row:hover{background:linear-gradient(135deg,rgba(30,160,233,0.08),rgba(124,58,237,0.05));border-color:rgba(30,160,233,0.25)}

.product-field{display:flex;flex-direction:column;gap:8px;flex:1;min-width:150px}

.product-field label{font-size:13px;font-weight:600;color:rgba(230,238,248,0.8);letter-spacing:0.3px;white-space:nowrap}

.product-field input{padding:12px 14px;background:rgba(15,23,36,0.6);border:1px solid rgba(30,160,233,0.2);border-radius:8px;color:#ffffff;font-size:14px;transition:all 0.2s ease;width:100%;box-sizing:border-box}

.product-field input:focus{outline:none;border-color:rgba(30,160,233,0.5);box-shadow:0 0 0 2px rgba(30,160,233,0.1)}

.remove-product-btn{width:40px;height:40px;background:linear-gradient(135deg,rgba(239,68,68,0.15),rgba(220,38,38,0.1));border:1px solid rgba(239,68,68,0.3);border-radius:8px;color:#ef4444;font-size:18px;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-bottom:0}

.remove-product-btn:hover{background:linear-gradient(135deg,rgba(239,68,68,0.25),rgba(220,38,38,0.15));transform:scale(1.05)}

.add-product-btn{display:flex;align-items:center;justify-content:center;gap:10px;padding:14px 24px;background:linear-gradient(135deg,rgba(34,197,94,0.15),rgba(22,163,74,0.1));border:2px dashed rgba(34,197,94,0.4);border-radius:10px;color:#22c55e;font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s ease}

.add-product-btn:hover{background:linear-gradient(135deg,rgba(34,197,94,0.25),rgba(22,163,74,0.15));border-color:rgba(34,197,94,0.6);transform:translateY(-1px)}

.add-product-btn .plus-icon{font-size:20px;font-weight:700}

.form-actions{display:flex;justify-content:flex-end;gap:12px;padding-top:8px}

.cancel-btn{padding:13px 36px;background:linear-gradient(135deg,rgba(148,163,184,0.2),rgba(100,116,139,0.15));color:rgba(230,238,248,0.8);border:1px solid rgba(148,163,184,0.3);border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;transition:all 0.2s ease}

.cancel-btn:hover{background:linear-gradient(135deg,rgba(148,163,184,0.3),rgba(100,116,139,0.2));border-color:rgba(148,163,184,0.5);transform:translateY(-1px)}

.cancel-btn:active{transform:translateY(0)}

.submit-btn{padding:13px 36px;background:linear-gradient(135deg,#1ea0e9,#7c3aed);color:white;border:none;border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(30,160,233,0.3)}

.submit-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(30,160,233,0.4)}

.submit-btn:active{transform:translateY(0)}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:10px;border-bottom:1px solid #0c1a2a;text-align:left;color:var(--text)}
.app-footer{text-align:center;padding:12px;color:var(--muted);font-size:13px}

/* Orders page: button styling */
.page-header button{background:linear-gradient(135deg,#1ea0e9,#7c3aed);color:white;border:none;padding:10px 18px;border-radius:10px;cursor:pointer;font-weight:600;font-size:13px;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(30,160,233,0.2)}
.page-header button:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(30,160,233,0.3)}
.page-header button:active{transform:translateY(0)}
.page-header button:not(:first-child){margin-left:8px}

/* Order form button */
.order-form button{background:linear-gradient(135deg,#1ea0e9,#7c3aed);color:white;border:none;padding:10px 18px;border-radius:10px;cursor:pointer;font-weight:600;font-size:13px;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(30,160,233,0.2)}
.order-form button:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(30,160,233,0.3)}
.order-form button:active{transform:translateY(0)}

/* Orders table: action buttons */
.table button{background:linear-gradient(135deg,rgba(30,160,233,0.15),rgba(124,58,237,0.1));color:#1ea0e9;border:1px solid rgba(30,160,233,0.3);padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:600;font-size:12px;transition:all 0.2s ease}
.table button:hover{background:linear-gradient(135deg,rgba(30,160,233,0.25),rgba(124,58,237,0.15));box-shadow:0 4px 12px rgba(30,160,233,0.2)}
.table button:active{transform:scale(0.98)}

/* Layout: left sidebar + separator + content */
.layout{display:flex;min-height:100vh;align-items:stretch}
.sidebar{width:180px;background:var(--sidebar-bg);padding:24px 12px;display:flex;flex-direction:column;gap:16px;align-items:center;border-right:1px solid rgba(255,255,255,0.05);transition:width 0.3s ease,padding 0.3s ease;position:relative}
.sidebar.collapsed{width:80px;padding:24px 8px}
.sidebar-toggle{position:absolute !important;top:12px;right:12px;width:32px !important;height:32px;padding:0 !important;display:flex;align-items:center;justify-content:center;background:rgba(30,160,233,0.15) !important;border:1px solid rgba(30,160,233,0.3) !important;border-radius:8px !important;font-size:16px;z-index:10;transition:all 0.2s ease}
.sidebar-toggle:hover{background:rgba(30,160,233,0.25) !important;transform:scale(1.05)}
.sidebar.collapsed .sidebar-toggle{right:50%;transform:translateX(50%)}
.sidebar-content{width:100%;display:flex;flex-direction:column;gap:16px;margin-top:40px}
.sidebar button{width:100%;background:linear-gradient(135deg,#1a3a5e,#0f2847);color:#e6eef8;border:1px solid rgba(255,255,255,0.1);padding:14px;border-radius:12px;cursor:pointer;font-weight:600;font-size:14px;transition:all 0.3s ease;box-shadow:0 4px 12px rgba(0,0,0,0.2);display:flex;align-items:center;justify-content:center;gap:10px}
.sidebar.collapsed button{padding:14px 8px;justify-content:center}
.sidebar button .icon{font-size:20px;flex-shrink:0}
.sidebar button .text{white-space:nowrap;overflow:hidden;transition:opacity 0.2s ease}
.sidebar.collapsed button .text{opacity:0;width:0;display:none}
.sidebar button:hover{background:linear-gradient(135deg,#2a4a6e,#1f3857);transform:translateY(-2px);box-shadow:0 8px 20px rgba(30,160,233,0.15)}
.sidebar button.active{background:linear-gradient(135deg,#1ea0e9,#1a7ab8);box-shadow:0 8px 24px rgba(30,160,233,0.25)}
.separator{width:1px;background:linear-gradient(180deg,rgba(255,255,255,0.1),rgba(255,255,255,0))}
.content-area{flex:1;padding:32px;display:flex;flex-direction:column;gap:24px}

/* Glass morphism container for machines section */
.content-area > .page{background:rgba(15,23,36,0.5);border:1px solid rgba(255,255,255,0.1);backdrop-filter:blur(10px)}

/* Home page styles */
.home-page{background:transparent !important;border:none !important}
.machines-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:32px;align-items:center;justify-items:center;padding:12px}
.machine-column{display:flex;flex-direction:column;align-items:center;gap:12px}

/* Machine card with glass morphism and glow */
.machine-card{width:340px;height:160px;background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0.04));border:1px solid rgba(255,255,255,0.15);border-radius:16px;display:flex;align-items:center;justify-content:center;padding:16px;box-sizing:border-box;backdrop-filter:blur(20px);box-shadow:0 8px 32px rgba(30,160,233,0.1),inset 0 1px 0 rgba(255,255,255,0.2);transition:all 0.3s ease;cursor:pointer}
.machine-card:hover{transform:translateY(-6px) scale(1.01);box-shadow:0 16px 48px rgba(30,160,233,0.2),inset 0 1px 0 rgba(255,255,255,0.2)}
.machine-card-content{width:100%;display:grid;grid-template-columns:1fr auto;gap:16px;align-items:flex-start}

/* Left side: order and product info */
.machine-card-info{display:flex;flex-direction:column;gap:8px;text-align:left}
.machine-card-info-label{font-size:12px;color:rgba(230,238,248,0.6);text-transform:uppercase;letter-spacing:0.5px;font-weight:700}
.machine-card-info-value{font-size:14px;color:#e6eef8;font-weight:600}

/* Right side: status badge */
.machine-status-badge{display:flex;flex-direction:column;gap:4px;align-items:flex-end}
.status-badge{padding:6px 12px;border-radius:999px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.2)}
.status-badge.running{background:linear-gradient(135deg,rgba(34,197,94,0.2),rgba(34,197,94,0.05));color:#22c55e;border-color:rgba(34,197,94,0.3)}
.status-badge.idle{background:linear-gradient(135deg,rgba(234,179,8,0.2),rgba(234,179,8,0.05));color:#eab308;border-color:rgba(234,179,8,0.3)}
.status-badge.maintenance{background:linear-gradient(135deg,rgba(239,68,68,0.2),rgba(239,68,68,0.05));color:#ef4444;border-color:rgba(239,68,68,0.3)}

/* Progress bar with glow effect */
.progress{width:100%;background:rgba(30,160,233,0.2);border-radius:999px;height:6px;margin-top:auto;overflow:visible;position:relative;border:1px solid rgba(30,160,233,0.3)}
.progress-fill{height:100%;background:linear-gradient(90deg,#7c3aed,#1ea0e9);display:block;position:absolute;left:0;top:0;border-radius:999px;transform-origin:left top;box-shadow:0 0 16px rgba(30,160,233,0.6),0 0 32px rgba(124,58,237,0.3),inset 0 0 8px rgba(255,255,255,0.2);animation:slideProgress 0.8s ease-out forwards}
.progress-fill.over{box-shadow:0 0 16px rgba(239,68,68,0.6),0 0 32px rgba(239,68,68,0.3),inset 0 0 8px rgba(255,255,255,0.2)}
.progress-text{position:absolute;left:50%;top:-18px;transform:translateX(-50%);color:#1ea0e9;font-weight:800;font-size:12px;z-index:3}

@keyframes slideProgress{from{width:0}to{width:var(--progress-width)}}

.machine-label{font-size:15px;color:var(--muted);margin-top:6px}

/* Scheduling Page */
.scheduling-page{width:100%;height:100%;display:flex;flex-direction:column;gap:16px}

/* Scheduling toolbar */
.scheduling-toolbar{display:flex;align-items:center;gap:20px;padding:16px 20px;background:linear-gradient(135deg,rgba(15,23,36,0.6),rgba(7,16,35,0.4));border:1px solid rgba(255,255,255,0.1);border-radius:12px;backdrop-filter:blur(10px)}

.toolbar-section{display:flex;align-items:center;gap:12px}
.toolbar-section label{display:flex;align-items:center;gap:8px;color:var(--text);font-size:13px;font-weight:600}
.toolbar-section input[type="date"]{padding:8px 12px;background:rgba(15,23,36,0.8);border:1px solid rgba(30,160,233,0.3);border-radius:8px;color:#ffffff;font-size:12px;cursor:pointer;color-scheme:light}
.toolbar-section input[type="date"]:hover{border-color:rgba(30,160,233,0.5)}
.toolbar-section input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(0.9) brightness(2);cursor:pointer;opacity:1}
.toolbar-section input[type="date"]::-webkit-calendar-picker-indicator:hover{filter:invert(0.9) brightness(2.5)}

.toolbar-section button{padding:8px 16px;background:linear-gradient(135deg,rgba(30,160,233,0.15),rgba(124,58,237,0.1));border:1px solid rgba(30,160,233,0.3);color:#1ea0e9;border-radius:8px;cursor:pointer;font-weight:600;font-size:12px;transition:all 0.2s ease}
.toolbar-section button:hover{background:linear-gradient(135deg,rgba(30,160,233,0.25),rgba(124,58,237,0.15));box-shadow:0 4px 12px rgba(30,160,233,0.2)}
.toolbar-section button.active{background:linear-gradient(135deg,#1ea0e9,#7c3aed);color:white;box-shadow:0 4px 12px rgba(30,160,233,0.3)}

.toolbar-section .primary-btn{background:linear-gradient(135deg,#1ea0e9,#7c3aed);color:white;border:none;box-shadow:0 4px 12px rgba(30,160,233,0.2)}
.toolbar-section .primary-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(30,160,233,0.3)}


.toolbar-section .urgent-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(239,68,68,0.3)}

/* Scheduling content layout */
.scheduling-content{display:grid;grid-template-columns:200px 1fr;gap:24px;flex:1;min-height:0;overflow:hidden}

/* Left sidebar: filters & legend */
.scheduling-sidebar{display:flex;flex-direction:column;gap:20px;background:linear-gradient(135deg,rgba(15,23,36,0.5),rgba(7,16,35,0.3));border:1px solid rgba(255,255,255,0.1);border-radius:12px;backdrop-filter:blur(10px);padding:16px;overflow-y:auto}

.filter-section h3,.legend-section h3{font-size:13px;font-weight:700;color:var(--text);margin:0 0 12px 0;text-transform:uppercase;letter-spacing:0.5px}

.filter-options{display:flex;flex-direction:column;gap:8px}
.filter-options label{display:flex;align-items:center;gap:8px;font-size:12px;color:rgba(230,238,248,0.7);cursor:pointer;transition:all 0.2s ease}
.filter-options label:hover{color:var(--text)}
.filter-options input[type="radio"]{cursor:pointer;accent-color:#1ea0e9}

.legend-items{display:flex;flex-direction:column;gap:8px}
.legend-item{display:flex;align-items:center;gap:8px}
.legend-color{width:16px;height:16px;border-radius:4px;flex-shrink:0}
.legend-item span{font-size:12px;color:rgba(230,238,248,0.7)}

.scheduling-main-wrapper{position:relative!important}

.scheduling-board-timeline{position:relative;min-height:500px}

.timeline-header{position:sticky;top:0;z-index:100;background:linear-gradient(135deg,rgba(15,23,36,0.9),rgba(7,16,35,0.8));backdrop-filter:blur(10px)}

.timeline-machine-label{position:absolute;left:0;top:0;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:13px;color:var(--text);text-transform:uppercase;letter-spacing:0.5px;border-right:1px solid rgba(255,255,255,0.1);background:rgba(15,23,36,0.6)}

.timeline-axis{overflow:hidden}

/* Time marks */
.time-mark{display:flex;align-items:flex-end;padding-bottom:4px;user-select:none}

/* Machine rows */
.timeline-rows{min-height:480px}
.timeline-row{transition:background 0.2s ease}
.timeline-row:hover{background:rgba(30,160,233,0.02)}

.machine-label-abs{z-index:10}

/* Zoom controls */
.zoom-controls{display:flex;align-items:center;gap:12px;padding:8px 16px;background:rgba(15,23,36,0.6);border-radius:8px;border:1px solid rgba(30,160,233,0.2)}

.zoom-slider{width:120px;height:4px;-webkit-appearance:none;appearance:none;background:rgba(30,160,233,0.2);border-radius:4px;outline:none;cursor:pointer}

.zoom-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;background:linear-gradient(135deg,#1ea0e9,#7c3aed);border-radius:50%;cursor:pointer;box-shadow:0 2px 8px rgba(30,160,233,0.4)}

.zoom-slider::-moz-range-thumb{width:14px;height:14px;background:linear-gradient(135deg,#1ea0e9,#7c3aed);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 8px rgba(30,160,233,0.4)}

.zoom-value{font-size:12px;font-weight:600;color:var(--accent);min-width:40px;text-align:center}

.zoom-reset-btn{padding:6px 12px;background:rgba(30,160,233,0.15);border:1px solid rgba(30,160,233,0.3);color:#1ea0e9;border-radius:6px;cursor:pointer;font-size:11px;font-weight:600;transition:all 0.2s ease}

.zoom-reset-btn:hover{background:rgba(30,160,233,0.25);box-shadow:0 2px 8px rgba(30,160,233,0.3)}

/* Work order cards - absolute positioned */
.work-order-card-abs{user-select:none}
.work-order-card-abs.detailed{min-width:120px}
.work-order-card-abs.compact{min-width:60px;padding:4px 6px}
.work-order-card-abs:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(30,160,233,0.3)!important}
.work-order-card-abs:active{cursor:grabbing!important}

/* Downtime slots - absolute positioned */
.downtime-slot-abs{user-select:none}

/* Snap line */
.snap-line{transition:left 0.05s ease-out}

/* Drag tooltip */
.drag-tooltip{animation:fadeIn 0.2s ease}

/* Minimap - Fixed at bottom */
.timeline-minimap-fixed{user-select:none}
.timeline-minimap-fixed:hover .minimap-viewport{border-color:#7c3aed;box-shadow:0 0 20px rgba(124,58,237,0.8),inset 0 0 12px rgba(124,58,237,0.3)}

.minimap-content{transition:all 0.15s ease}
.minimap-content:hover{box-shadow:0 2px 12px rgba(30,160,233,0.4)!important;border-color:rgba(30,160,233,0.5)!important}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(-5px)}
  to{opacity:1;transform:translateY(0)}
}

@keyframes pulse{
  0%{transform:scale(1);opacity:1}
  50%{transform:scale(1.3);opacity:0.7}
  100%{transform:scale(1);opacity:1}
}

/* Snap indicator */
.snap-indicator{font-family:monospace;font-weight:600;white-space:nowrap}

.machine-column-header{font-size:13px;font-weight:700;color:var(--text);text-transform:uppercase;letter-spacing:0.5px;padding:8px;display:flex;align-items:center;justify-content:center}

.shift-header{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4px}
.shift-label{font-size:11px;font-weight:700;color:var(--text)}

.machine-label{display:flex;align-items:center;justify-content:center;padding:8px;font-size:12px;font-weight:700;color:var(--text);background:linear-gradient(135deg,rgba(30,160,233,0.15),rgba(124,58,237,0.1));border:1px solid rgba(30,160,233,0.2);border-radius:8px}

.shift-cell{background:transparent;position:relative}
.shift-cell.drag-over{background:rgba(30,160,233,0.15);border:2px dashed rgba(30,160,233,0.5);border-radius:8px}
.shift-cell.drag-blocked{background:rgba(239,68,68,0.2);border:2px dashed rgba(239,68,68,0.5);border-radius:8px;cursor:not-allowed}

/* Work order cards */
.work-order-card{padding:10px;background:linear-gradient(135deg,rgba(255,255,255,0.08),rgba(255,255,255,0.04));border:1px solid rgba(255,255,255,0.1);border-left:3px solid;border-radius:8px;cursor:default;transition:all 0.2s ease;box-shadow:0 4px 12px rgba(30,160,233,0.1);display:flex;flex-direction:column;gap:6px;min-height:100px;justify-content:center}
.work-order-card:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(30,160,233,0.2)}

/* Downtime slots */
.downtime-slot{padding:10px;background:linear-gradient(135deg,rgba(239,68,68,0.2),rgba(239,68,68,0.1));border:2px solid #ef4444;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;min-height:100px;pointer-events:none}
.downtime-icon{font-size:24px}
.downtime-text{font-size:12px;font-weight:700;color:#ef4444;text-transform:uppercase;letter-spacing:0.5px}
.downtime-time{font-size:10px;color:rgba(239,68,68,0.8)}

.wo-header{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}
.wo-header-left{display:flex;align-items:center;gap:6px}
.wo-drag-handle{font-size:16px;color:rgba(230,238,248,0.5);cursor:grab;user-select:none;padding:0 4px;line-height:1;transition:color 0.2s ease;z-index:100;position:relative}
.wo-drag-handle:hover{color:var(--accent)}
.wo-drag-handle:active{cursor:grabbing}
.wo-order-id{font-size:11px;font-weight:700;color:var(--text);text-transform:uppercase}
.wo-header-right{display:flex;align-items:center;gap:6px}
.wo-status-badge{padding:2px 6px;border-radius:4px;font-size:10px;font-weight:700;color:white;text-transform:uppercase}
.wo-lock-icon{font-size:12px;opacity:0.7}

.wo-product{font-size:11px;color:rgba(230,238,248,0.7);margin-bottom:4px}
.wo-time{font-size:10px;color:rgba(230,238,248,0.5);margin-bottom:8px}

.wo-progress{position:relative;margin-top:8px}
.wo-progress .progress-bar{width:100%;height:4px;background:rgba(30,160,233,0.2);border-radius:999px;overflow:visible;border:0.5px solid rgba(30,160,233,0.3)}
.wo-progress .progress-fill{height:100%;background:linear-gradient(90deg,#7c3aed,#1ea0e9);border-radius:999px;box-shadow:0 0 8px rgba(30,160,233,0.4),0 0 16px rgba(124,58,237,0.2)}
.wo-progress .progress-text{position:absolute;top:-16px;left:50%;transform:translateX(-50%);font-size:9px;font-weight:700;color:#1ea0e9}

/* Orders page with collapsible components */
.orders-container{display:flex;flex-direction:column;gap:16px}

.order-card{background:linear-gradient(135deg,rgba(26,58,94,0.4),rgba(15,40,71,0.6));border:1px solid rgba(255,255,255,0.1);border-radius:12px;overflow:hidden;box-shadow:0 4px 12px rgba(0,0,0,0.2);transition:all 0.3s ease}

.order-card:hover{box-shadow:0 8px 20px rgba(30,160,233,0.15);border-color:rgba(30,160,233,0.3)}

.order-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;cursor:pointer;user-select:none;transition:background 0.2s ease}

.order-header:hover{background:rgba(30,160,233,0.05)}

.order-info{display:flex;align-items:center;gap:12px;flex:1}

.order-expand-icon{font-size:14px;color:#1ea0e9;transition:transform 0.2s ease;width:20px;text-align:center}

.order-main-info{display:flex;align-items:center;gap:20px;flex-wrap:wrap}

.order-number{font-size:15px;font-weight:700;color:#1ea0e9;min-width:100px}

.order-customer{font-size:13px;color:var(--text);font-weight:600;min-width:120px}

.order-product{font-size:12px;color:rgba(230,238,248,0.7);padding:4px 10px;background:rgba(30,160,233,0.1);border-radius:6px;border:1px solid rgba(30,160,233,0.2);min-width:80px;text-align:center}

.order-due-date{font-size:12px;color:#22c55e;font-weight:500;min-width:140px}

.order-actions{display:flex;gap:8px}

.order-actions button{background:linear-gradient(135deg,rgba(30,160,233,0.15),rgba(124,58,237,0.1));color:#1ea0e9;border:1px solid rgba(30,160,233,0.3);padding:8px 16px;border-radius:8px;cursor:pointer;font-weight:600;font-size:13px;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0,0,0,0.2)}

.order-actions button:hover{background:linear-gradient(135deg,rgba(30,160,233,0.25),rgba(124,58,237,0.15));transform:translateY(-1px);box-shadow:0 4px 12px rgba(30,160,233,0.3)}

.order-actions button:active{transform:translateY(0);box-shadow:0 2px 6px rgba(0,0,0,0.2)}

.order-actions button:last-child{background:linear-gradient(135deg,rgba(239,68,68,0.15),rgba(220,38,38,0.1));color:#ef4444;border:1px solid rgba(239,68,68,0.3)}

.order-actions button:last-child:hover{background:linear-gradient(135deg,rgba(239,68,68,0.25),rgba(220,38,38,0.15));box-shadow:0 4px 12px rgba(239,68,68,0.3)}

.components-section{padding:16px 20px;border-top:1px solid rgba(255,255,255,0.05);background:rgba(0,0,0,0.2);animation:slideDown 0.3s ease}

@keyframes slideDown{
  from{opacity:0;max-height:0}
  to{opacity:1;max-height:500px}
}

.no-components{text-align:center;padding:24px;color:rgba(230,238,248,0.5);font-size:13px}

.products-list{display:flex;flex-direction:column;gap:16px}

.product-item{background:rgba(15,23,36,0.5);border:1px solid rgba(30,160,233,0.15);border-radius:8px;overflow:hidden}

.product-header{padding:12px 16px;background:rgba(30,160,233,0.08);border-bottom:1px solid rgba(30,160,233,0.15)}

.product-info{display:flex;align-items:center;gap:16px}

.product-label{font-size:12px;color:rgba(230,238,248,0.6);font-weight:600}

.product-code{font-size:14px;font-weight:700;color:#1ea0e9;font-family:monospace}

.product-quantity{font-size:13px;color:rgba(230,238,248,0.8);padding:4px 10px;background:rgba(30,160,233,0.1);border-radius:6px;font-weight:600}

.components-list{padding:12px}

.components-table{width:100%;border-collapse:collapse}

.components-table th{padding:10px;text-align:left;font-size:11px;font-weight:700;color:rgba(230,238,248,0.7);text-transform:uppercase;letter-spacing:0.5px;border-bottom:1px solid rgba(255,255,255,0.1)}

.components-table td{padding:12px 10px;border-bottom:1px solid rgba(255,255,255,0.05);font-size:13px;color:var(--text)}

.components-table tbody tr{transition:background 0.2s ease}

.components-table tbody tr:hover{background:rgba(30,160,233,0.05)}

.status-badge{padding:4px 8px;border-radius:6px;font-size:10px;font-weight:700;letter-spacing:0.5px}

.status-已排程{background:rgba(34,197,94,0.2);color:#22c55e;border:1px solid rgba(34,197,94,0.3)}

.status-未排程{background:rgba(251,191,36,0.2);color:#fbbf24;border:1px solid rgba(251,191,36,0.3)}

.status-無法進行排程{background:rgba(239,68,68,0.2);color:#ef4444;border:1px solid rgba(239,68,68,0.3)}

.status-模具{background:rgba(168,85,247,0.2);color:#a855f7;border:1px solid rgba(168,85,247,0.3)}

/* 保留舊的英文狀態以支援舊資料 */
.status-pending{background:rgba(251,191,36,0.2);color:#fbbf24;border:1px solid rgba(251,191,36,0.3)}

.status-scheduled{background:rgba(34,197,94,0.2);color:#22c55e;border:1px solid rgba(34,197,94,0.3)}

.status-in_progress{background:rgba(30,160,233,0.2);color:#1ea0e9;border:1px solid rgba(30,160,233,0.3)}

.status-completed{background:rgba(124,58,237,0.2);color:#7c3aed;border:1px solid rgba(124,58,237,0.3)}

/* Modal overlay for forms */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);backdrop-filter:blur(4px);display:flex;align-items:flex-start;justify-content:center;padding-top:60px;z-index:1000;animation:fadeIn 0.2s ease;overflow-y:auto;scrollbar-width:none}

.modal-overlay::-webkit-scrollbar{display:none}

.modal-content{max-width:1000px;width:95%;max-height:calc(100vh - 120px);overflow:visible;animation:slideUp 0.3s ease;padding:8px;margin-bottom:40px}

@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

@keyframes slideUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:translateY(0)}
}

/* Responsive tweaks */
@media (max-width:900px){
  .machines-grid{grid-template-columns:1fr;gap:28px}
  .sidebar{display:none}
  .separator{display:none}
  .content-area > *{max-width:900px}
  .scheduling-content{grid-template-columns:1fr}
  .scheduling-sidebar{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
  .scheduling-toolbar{flex-wrap:wrap}
  .order-main-info{flex-direction:column;align-items:flex-start;gap:8px}
}


/* === LINE 風格聊天頁 === */
.chat-page.line-style {
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: 0;
  box-sizing: border-box;
  background: linear-gradient(#011022, #11355f);
}

/* 上方標題列 */
.chat-header {
  height: 50px;
  display: flex;
  align-items: center;
  padding: 0 16px;
  box-sizing: border-box;
  background: rgba(0, 0, 0, 0.25);
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
}

.chat-header-title {
  font-size: 1rem;
  font-weight: 600;
}

/* 三行提示：縮小一點 */
.chat-hints.compact {
  padding: 6px 16px 4px;
  font-size: 0.78rem;
  line-height: 1.4;
  opacity: 0.9;
  background: rgba(0, 0, 0, 0.15);
}

.chat-hints.compact code {
  background: rgba(255, 255, 255, 0.15);
  padding: 0 4px;
  border-radius: 4px;
  font-size: 0.8em;
}

/* 聊天視窗（氣泡區） */
.chat-window {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 8px 8px 12px;
  box-sizing: border-box;
}

.chat-messages {
  flex: 1;
  padding: 8px 4px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* 每一行訊息 */
.chat-row {
  display: flex;
  align-items: flex-end;
}

.chat-row-assistant {
  justify-content: flex-start;
}

.chat-row-user {
  justify-content: flex-end;
}

/* 左側小頭像（只有助理有） */
.chat-avatar {
  width: 32px;
  height: 32px;
  border-radius: 16px;
  margin: 0 6px;
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.9);
}

/* 氣泡本體 */
.chat-bubble {
  max-width: 75%;
  padding: 8px 12px;
  border-radius: 18px;
  font-size: 0.9rem;
  line-height: 1.5;
  word-break: break-word;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.18);
  background: rgba(255, 255, 255, 0.9);
}

.chat-bubble p {
  margin: 0;
}

/* 使用者：右邊綠色泡泡 */
.bubble-user {
  background: #36c35a;
  color: #fff;
  border-bottom-right-radius: 4px;
}

/* 助理：左邊白色泡泡 */
.bubble-assistant {
  background: #ffffff;
  color: #111;
  border-bottom-left-radius: 4px;
}

/* 打字中動畫 */
.typing-bubble {
  display: inline-flex;
  gap: 4px;
  align-items: center;
}

.typing-bubble .dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.4);
  animation: typingDot 1s infinite ease-in-out;
}

.typing-bubble .dot:nth-child(2) {
  animation-delay: 0.15s;
}

.typing-bubble .dot:nth-child(3) {
  animation-delay: 0.3s;
}

@keyframes typingDot {
  0%,
  100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  50% {
    transform: translateY(-3px);
    opacity: 1;
  }
}

/* 錯誤訊息 */
.chat-error {
  margin-top: 4px;
  padding: 4px 10px;
  font-size: 0.78rem;
  color: #ffedf0;
  background: rgba(190, 39, 60, 0.7);
  border-radius: 12px;
}

/* 下方輸入列 */
.chat-input-bar {
  display: flex;
  gap: 8px;
  padding: 6px 10px 4px;
  border-top: 1px solid rgba(0, 0, 0, 0.25);
  background: rgba(0, 0, 0, 0.25);
  box-sizing: border-box;
}

.chat-input {
  flex: 1;
  resize: none;
  border-radius: 18px;
  border: none;
  padding: 8px 12px;
  font-size: 0.9rem;
  background: rgba(255, 255, 255, 0.95);
  color: #111;
  outline: none;
}

.chat-send-btn {
  padding: 0 16px;
  border-radius: 18px;
  border: none;
  font-size: 0.9rem;
  background: #36c35a;
  color: #fff;
  cursor: pointer;
  white-space: nowrap;
}

.chat-send-btn:disabled {
  background: #9acfa7;
  cursor: not-allowed;
}

/* 手機寬度調整 */
@media (max-width: 768px) {
  .chat-bubble {
    max-width: 82%;
  }
}

/* ==================== 浮動聊天窗口 ==================== */
.floating-chat-button {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #1ea0e9, #7c3aed);
  border: none;
  font-size: 28px;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  z-index: 1000;
}

.floating-chat-button:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 20px rgba(30, 160, 233, 0.4);
}

.floating-chat-container {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 380px;
  height: 500px;
  background: var(--surface);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  z-index: 1000;
  border: 1px solid rgba(30, 160, 233, 0.2);
}

.floating-chat-header {
  background: linear-gradient(135deg, #1ea0e9, #7c3aed);
  color: white;
  padding: 14px 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: 600;
  font-size: 14px;
}

.floating-chat-close {
  background: transparent;
  border: none;
  color: white;
  font-size: 20px;
  cursor: pointer;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s;
}

.floating-chat-close:hover {
  background: rgba(255, 255, 255, 0.2);
}

.floating-chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: var(--bg);
  scrollbar-width: thin;
  scrollbar-color: rgba(30, 160, 233, 0.4) transparent;
}

.floating-chat-messages::-webkit-scrollbar {
  width: 6px;
}

.floating-chat-messages::-webkit-scrollbar-track {
  background: transparent;
}

.floating-chat-messages::-webkit-scrollbar-thumb {
  background: rgba(30, 160, 233, 0.4);
  border-radius: 3px;
}

.floating-chat-welcome {
  text-align: center;
  color: var(--muted);
  font-size: 13px;
  padding: 20px;
  line-height: 1.6;
}

.floating-chat-message {
  padding: 10px 14px;
  border-radius: 12px;
  max-width: 85%;
  font-size: 13px;
  line-height: 1.5;
  word-wrap: break-word;
  white-space: pre-wrap;
}

.floating-chat-message.user {
  background: linear-gradient(135deg, #1ea0e9, #1c8dcf);
  color: white;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}

.floating-chat-message.assistant {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
  align-self: flex-start;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-bottom-left-radius: 4px;
}

.floating-chat-message.loading {
  opacity: 0.7;
  font-style: italic;
}

.floating-chat-input-bar {
  display: flex;
  gap: 8px;
  padding: 12px;
  background: var(--surface);
  border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.floating-chat-input {
  flex: 1;
  resize: none;
  border-radius: 10px;
  border: 1px solid rgba(30, 160, 233, 0.3);
  padding: 10px 12px;
  font-size: 13px;
  background: var(--bg);
  color: var(--text);
  outline: none;
  font-family: inherit;
  max-height: 100px;
  overflow-y: auto;
  scrollbar-width: thin;
}

.floating-chat-input:focus {
  border-color: rgba(30, 160, 233, 0.6);
}

.floating-chat-input::placeholder {
  color: var(--muted);
}

.floating-chat-send {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(135deg, #1ea0e9, #7c3aed);
  color: white;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
  flex-shrink: 0;
}

.floating-chat-send:hover:not(:disabled) {
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(30, 160, 233, 0.4);
}

.floating-chat-send:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* 手機版調整 */
@media (max-width: 768px) {
  .floating-chat-container {
    width: calc(100vw - 32px);
    height: calc(100vh - 100px);
    bottom: 16px;
    right: 16px;
  }
  
  .floating-chat-button {
    width: 56px;
    height: 56px;
    bottom: 20px;
    right: 20px;
  }
}
